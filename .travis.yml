git:
  depth: false

matrix:
  include:

###############################################################################
# Service balancer 
###############################################################################
    - os: linux
      dist: bionic
      language: go
      env:
         - TARGET_TYPE=go
         - BUILD_TYPE=Release
         - GOOS=linux
         - GOARCH=amd64
         - BALANCER_PATH=$HOME/build/BeamMW/wallet-service/service-balancer/
         - DATE=$(date +%Y.%m.%d)
         - FTP_UPLOAD_PATH=${BUILD_SERVER}/files/$TRAVIS_BRANCH/$DATE/$BUILD_TYPE/$TARGET_TYPE/
         #- S3_UPLOAD_PATH=$TRAVIS_BRANCH/$(date +%Y.%m.%d)/$BUILD_TYPE/$TARGET_TYPE/
         #- S3_LATEST_UPLOAD_PATH=$TRAVIS_BRANCH/latest/$BUILD_TYPE/$TARGET_TYPE/
      go:
         - 1.13.x
      script:
         #- cd $BALANCER_PATH && go build
      after_success:
         #- tar cvzf service-balancer.tar.gz --directory=$BALANCER_PATH service-balancer  config.json
         #- cd $BALANCER_PATH && ls
         #- curl --retry 3 --ftp-create-dirs -T service-balancer.tar.gz $FTP_UPLOAD_PATH
         #- artifacts upload --target-paths "$S3_UPLOAD_PATH" service-balancer.tar.gz
         #- artifacts upload --target-paths "$S3_LATEST_UPLOAD_PATH" service-balancer.tar.gz

###############################################################################
# Common part
###############################################################################
before_script:
  - curl -sL https://raw.githubusercontent.com/travis-ci/artifacts/master/install | bash
  - BEAM_TARGET_SUFFIX="-masternet"
  - BEAM_DISPLAY_SUFFIX="Masternet"
  - BEAM_DISPLAY_SUFFIX2="-Masternet"

notifications:
  email:
    - big.romanov@gmail.com
